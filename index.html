<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род ро╡ро┐ройро╛ ро╡роЩрпНроХро┐ (10 роородро┐рокрпНрокрпЖрогрпН)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  body{font-family:"Noto Sans Tamil",sans-serif;background:#f9fafb;padding:20px;color:#222;text-align:center;}
  h1{color:#006699;margin-bottom:10px;}
  .info-box input{padding:8px;margin:5px;border-radius:6px;border:1px solid #aaa;width:80%;max-width:400px;}
  .card{background:#fff;border-radius:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);padding:20px;margin:auto;max-width:700px;text-align:left;}
  button{background:#0084ff;border:none;color:#fff;padding:10px 20px;margin:10px;border-radius:8px;cursor:pointer;font-size:16px;}
  button:hover{background:#006edc;}
  .option-btn{display:block;width:100%;margin:8px 0;background:#e0f2ff;color:#111;text-align:left;padding:10px;border-radius:6px;border:1px solid #bde0ff;}
  #scoreboard,#timer{font-size:18px;margin-bottom:8px;color:#333;}
  #feedback{color:#006600;margin-top:10px;font-weight:bold;}
  .footer{margin-top:15px;color:#555;font-size:14px;}
</style>
</head>

<body>

<h1>ЁЯУШ 9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род родрпЗро░рпНро╡рпБ (10 роородро┐рокрпНрокрпЖрогрпН)</h1>

<!-- STUDENT INFO -->
<div class="info-box" id="infoBox">
  <h3>рооро╛рогро╡ро░рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН</h3>
  <input type="text" id="studentName" placeholder="рокрпЖропро░рпН"><br>
  <input type="text" id="studentClass" placeholder="ро╡роХрпБрокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокро┐ро░ро┐ро╡рпБ (роО.роХро╛., 9A)"><br>
  <input type="text" id="studentSchool" placeholder="рокро│рпНро│ро┐ рокрпЖропро░рпН"><br>

  <!-- тнР FIXED: DATE FIELD ADDED тнР -->
  <input type="date" id="quizDate"><br><br>

  <button onclick="startQuiz()">родрпКроЯроЩрпНроХрпБ тЮбя╕П</button>
</div>

<!-- QUIZ AREA -->
<div id="quizArea" style="display:none;">
  <div id="scoreboard">роородро┐рокрпНрокрпЖрогрпН: 0 / 10</div>
  <div id="timer">тП▒я╕П роирпЗро░роорпН: 60</div>

  <div id="quiz" class="card"></div>
  <div id="feedback"></div>

  <button id="nextBtn" onclick="nextQuestion()">роЕроЯрпБродрпНрод ро╡ро┐ройро╛ тЮбя╕П</button>
  <button id="downloadBtn" style="display:none;" onclick="downloadPDF()">ЁЯУД PDF рокродро┐ро╡ро┐ро▒роХрпНроХ</button>
</div>

<script>
// ================== QUESTION BANK ==================
const bank = [
  { sentence:"50000 + 300 + 70 + 5 роЗройрпН роЪрпБро░рпБроЩрпНроХро┐роп ро╡роЯро┐ро╡роорпН.", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["53750","50375","53075","57305"], answerText:"50375", explanation:"50000+300+70+5 = 50375." },
  { sentence:"826 роЗройрпН ро╡ро┐ро░ро┐ро╡ро╛роХрпНроХ ро╡роЯро┐ро╡роорпН?", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["800+20+6","820+6","80+26","8+26"], answerText:"800+20+6", explanation:"826 = 800 + 20 + 6." },
  { sentence:"рооро┐роХроЪрпН роЪро┐ро▒ро┐роп роОроЯрпНроЯроХрпНроХ роОрогрпН роОродрпБ?", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["10000000","9999999","1000000","11111111"], answerText:"10000000", explanation:"1роХрпНроХрпБ рокро┐ройрпН 7 рокрпВроЬрпНроЬро┐ропроЩрпНроХро│рпН = 10000000." },
  { sentence:"35 рооро▒рпНро▒рпБроорпН 28 роЗро╡ро▒рпНро▒ро┐ро▓рпН рокрпЖро░ро┐роп роОрогрпН роОродрпБ?", chapter:"роОрогрпНроХро│рпИ роТрокрпНрокро┐роЯрпБродро▓рпН", options:["28","35","25","38"], answerText:"35", explanation:"35 > 28" },
  { sentence:"6735, 4378, 6753, 4387 роЗро╡ро▒рпНро▒ро┐ро▓рпН рооро┐роХрокрпНрокрпЖро░ро┐роп роОрогрпН роОродрпБ?", chapter:"роОрогрпНроХро│рпИ роТрокрпНрокро┐роЯрпБродро▓рпН", options:["6753","6735","4387","4378"], answerText:"6753", explanation:"6753 is greatest." }
  // (trimmed for message limit тАФ rest can stay same)
];

let student = {};
let questions = [];
let currentIndex = 0;
let current = null;
let score = 0;
let timer = null;
let answers = [];

// ================== START QUIZ ==================
function startQuiz() {
  student.name = document.getElementById("studentName").value.trim();
  student.class = document.getElementById("studentClass").value.trim();
  student.school = document.getElementById("studentSchool").value.trim();
  student.date = document.getElementById("quizDate").value;

  if (!student.name || !student.class || !student.school || !student.date) {
    alert("тЭЧ роЕройрпИродрпНродрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпИропрпБроорпН роиро┐ро░рокрпНрокро╡рпБроорпН.");
    return;
  }

  // Pick random 10 questions
  questions = bank.sort(() => 0.5 - Math.random()).slice(0, 10);

  document.getElementById("infoBox").style.display = "none";
  document.getElementById("quizArea").style.display = "block";

  score = 0;
  currentIndex = 0;
  answers = [];

  nextQuestion();
}

// ================== LOAD QUESTION ==================
function nextQuestion() {
  clearInterval(timer);

  if (currentIndex >= questions.length) return finishQuiz();

  current = questions[currentIndex];

  document.getElementById("timer").textContent = "тП▒я╕П роирпЗро░роорпН: 60";
  document.getElementById("scoreboard").textContent = `роородро┐рокрпНрокрпЖрогрпН: ${score} / 10`;

  let quiz = document.getElementById("quiz");
  quiz.innerHTML = `
    <h3>${currentIndex + 1}. ${current.sentence}</h3>
    <p><b>роЕро▓роХрпБ:</b> ${current.chapter}</p>
    ${current.options.map(o =>
      `<button class="option-btn" onclick="checkAnswer('${o.replace(/'/g,"\\'")}')">${o}</button>`
    ).join("")}
  `;
}

// ================== CHECK ANSWER ==================
function checkAnswer(option) {
  const correct = option === current.answerText;
  if (correct) score++;

  answers.push({
    question: current.sentence,
    yourAnswer: option,
    correctAnswer: current.answerText
  });

  currentIndex++;
  nextQuestion();
}

// ================== FINISH QUIZ ==================
function finishQuiz() {
  document.getElementById("quiz").innerHTML = `
    <h2>ЁЯОЙ рокро░рпАроЯрпНроЪрпИ роорпБроЯро┐роирпНродродрпБ!</h2>
    <p>роородро┐рокрпНрокрпЖрогрпН: ${score} / 10</p>
  `;
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("downloadBtn").style.display = "inline-block";
}

// ================== PDF (Tamil Font) ==================
function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.addFont("NotoSansTamil-Black.ttf", "TamilFont", "normal");
  doc.setFont("TamilFont");

  doc.setFontSize(18);
  doc.text("9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род роорпБроЯро┐ро╡рпБ", 20, 20);

  let y = 40;
  doc.setFontSize(12);

  answers.forEach((a,i)=>{
    doc.text(`${i+1}. ${a.question}`, 10, y); y+=6;
    doc.text(`роЙроЩрпНроХро│рпН рокродро┐ро▓рпН: ${a.yourAnswer}`, 12, y); y+=5;
    doc.text(`роЪро░ро┐ропро╛рой рокродро┐ро▓рпН: ${a.correctAnswer}`, 12, y); y+=8;

    if(y > 270){ doc.addPage(); y = 20; }
  });

  doc.save("Maths_Report.pdf");
}
</script>

<div class="footer">┬й 2025 Thiraviya Kumar | Class 9 Tamil Medium Maths Quiz</div>

</body>
</html>
