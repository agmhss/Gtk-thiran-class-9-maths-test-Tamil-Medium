<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род ро╡ро┐ройро╛ ро╡роЩрпНроХро┐ (10 роородро┐рокрпНрокрпЖрогрпН)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body{font-family:"Noto Sans Tamil",sans-serif;background:#f9fafb;padding:20px;color:#222;text-align:center;}
  h1{color:#006699;margin-bottom:10px;}
  .info-box input{padding:8px;margin:5px;border-radius:6px;border:1px solid #aaa;width:80%;max-width:400px;}
  .card{background:#fff;border-radius:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);padding:20px;margin:auto;max-width:700px;text-align:left;}
  button{background:#0084ff;border:none;color:#fff;padding:10px 20px;margin:10px;border-radius:8px;cursor:pointer;font-size:16px;}
  button:hover{background:#006edc;}
  .option-btn{display:block;width:100%;margin:8px 0;background:#e0f2ff;color:#111;text-align:left;padding:10px;border-radius:6px;border:1px solid #bde0ff;}
  #scoreboard,#timer{font-size:18px;margin-bottom:8px;color:#333;}
  #feedback{color:#006600;margin-top:10px;font-weight:bold;}
  .footer{margin-top:15px;color:#555;font-size:14px;}
</style>
</head>
<body>

<h1>ЁЯУШ 9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род ро╡ро┐ройро╛ рокро░ро┐роЪрпЛродройрпИ (10 роородро┐рокрпНрокрпЖрогрпН)</h1>

<div class="info-box" id="infoBox">
  <h3>рооро╛рогро╡ро░рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН</h3>
  <input type="text" id="studentName" placeholder="рокрпЖропро░рпН"><br>
  <input type="text" id="studentClass" placeholder="ро╡роХрпБрокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокро┐ро░ро┐ро╡рпБ (роО.роХро╛., 9A)"><br>
  <input type="text" id="studentSchool" placeholder="рокро│рпНро│ро┐ рокрпЖропро░рпН"><br><br>
  <button onclick="startQuiz()">родрпКроЯроЩрпНроХрпБ тЮбя╕П</button>
</div>

<div id="quizArea" style="display:none;">
  <div id="scoreboard">роородро┐рокрпНрокрпЖрогрпН: 0 / 10</div>
  <div id="timer">тП▒я╕П роирпЗро░роорпН: 60</div>
  <div id="quiz" class="card"></div>
  <div id="feedback"></div>
  <button id="nextBtn" onclick="nextQuestion()">роЕроЯрпБродрпНрод ро╡ро┐ройро╛ тЮбя╕П</button>
  <button id="downloadBtn" style="display:none;" onclick="downloadPDF()">ЁЯУД PDF рокродро┐ро╡ро┐ро▒роХрпНроХ</button>
</div>

<script>
const bank = [
  { sentence:"50000 + 300 + 70 + 5 роЗройрпН роЪрпБро░рпБроЩрпНроХро┐роп ро╡роЯро┐ро╡роорпН.", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["53750","50375","53075","57305"], answerText:"50375", explanation:"50000+300+70+5 = 50375." },
  { sentence:"826 роЗройрпН ро╡ро┐ро░ро┐ро╡ро╛роХрпНроХ ро╡роЯро┐ро╡роорпН?", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["800+20+6","820+6","80+26","8+26"], answerText:"800+20+6", explanation:"826 = 800 + 20 + 6." },
  { sentence:"рооро┐роХроЪрпН роЪро┐ро▒ро┐роп роОроЯрпНроЯроХрпНроХ роОрогрпН роОродрпБ?", chapter:"роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ", options:["10000000","9999999","1000000","11111111"], answerText:"10000000", explanation:"1роХрпНроХрпБ рокро┐ройрпН 7 рокрпВроЬрпНроЬро┐ропроЩрпНроХро│рпН = 10000000." }
];

let student = {};
let questions = [];
let currentIndex = 0;
let current = null;
let score = 0;
let timer = null;
let timeLeft = 15;
let answers = [];

function gradeFromPercent(p) {
  if (p >= 90) return "A+";
  if (p >= 80) return "A";
  if (p >= 70) return "B";
  if (p >= 60) return "C";
  if (p >= 50) return "D";
  return "F";
}

function startQuiz() {
  student.name = document.getElementById("studentName").value.trim();
  student.class = document.getElementById("studentClass").value.trim();
  student.school = document.getElementById("studentSchool").value.trim();
  student.date = document.getElementById("quizDate").value;

  if (!student.name || !student.class || !student.school || !student.date) {
    alert("тЭЧ роЕройрпИродрпНродрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпИропрпБроорпН роиро┐ро░рокрпНрокро╡рпБроорпН.");
    return;
  }

  if (bank.length < 10) {
    alert("Bank has fewer than 10 questions.");
    return;
  }

  questions = bank.slice().sort(() => 0.5 - Math.random()).slice(0, 10);

  document.getElementById("infoBox").style.display = "none";
  document.getElementById("quizArea").style.display = "block";

  score = 0;
  currentIndex = 0;
  answers = [];

  nextQuestion();
}

function nextQuestion() {
  clearInterval(timer);

  if (currentIndex >= questions.length) {
    finishQuiz();
    return;
  }

  current = questions[currentIndex];
  timeLeft = 15;

  document.getElementById("timer").textContent = "тП▒я╕П роирпЗро░роорпН: " + timeLeft;
  document.getElementById("scoreboard").textContent = "роородро┐рокрпНрокрпЖрогрпН: " + score + " / 10";

  let quiz = document.getElementById("quiz");

  quiz.innerHTML = `
    <h3>${currentIndex + 1}. ${current.sentence}</h3>
    <p class="small"><b>роЕро▓роХрпБ:</b> ${current.chapter}</p>
    ${current.options
      .map(o => `<button class="option-btn" onclick="checkAnswer('${o.replace(/'/g, "\\'")}')">${o}</button>`)
      .join("")}
    <p class="small">роХро╛ро▓ ро╡ро░роорпНрокрпБ: 15 ро╡ро┐ройро╛роЯро┐роХро│рпН</p>
  `;

  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").textContent = "тП▒я╕П роирпЗро░роорпН: " + timeLeft;

    if (timeLeft <= 0) {
      clearInterval(timer);
      recordAnswer("роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ", false);
      alert("тП░ роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ!\nроЪро░ро┐ропро╛рой рокродро┐ро▓рпН: " + current.answerText);
      currentIndex++;
      nextQuestion();
    }
  }, 1000);
}

function checkAnswer(option) {
  clearInterval(timer);
  const correct = option === current.answerText;
  if (correct) score++;
  recordAnswer(option, correct);

  if (correct) alert("тЬЕ роЪро░ро┐ропро╛рой рокродро┐ро▓рпН!\nро╡ро┐ро│роХрпНроХроорпН: " + current.explanation);
  else alert("тЭМ родро╡ро▒рпБ!\nроЪро░ро┐ропро╛рой рокродро┐ро▓рпН: " + current.answerText + "\nро╡ро┐ро│роХрпНроХроорпН: " + current.explanation);

  currentIndex++;
  nextQuestion();
}

function recordAnswer(selected, correct) {
  answers.push({
    question: current.sentence,
    yourAnswer: selected,
    correctAnswer: current.answerText,
    isCorrect: correct
  });
}

function finishQuiz() {
  clearInterval(timer);

  let pct = Math.round((score / 10) * 100);
  let grade = gradeFromPercent(pct);

  document.getElementById("quiz").innerHTML = `
    <h2>ЁЯОЙ рокро░рпАроЯрпНроЪрпИ роорпБроЯро┐роирпНродродрпБ!</h2>
    <p>роородро┐рокрпНрокрпЖрогрпН: ${score}/10</p>
    <p>роЪродро╡рпАродроорпН: ${pct}%</p>
    <p>роородро┐рокрпНрокрпАроЯрпБ: ${grade}</p>
  `;

  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("downloadBtn").style.display = "inline-block";
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // ЁЯФе Tamil font loaded
  doc.addFont("NotoSansTamil-Black.ttf", "TamilFont", "normal");
  doc.setFont("TamilFont");

  doc.setFontSize(16);
  doc.text("9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род (10 роородро┐рокрпНрокрпЖрогрпН) роорпБроЯро┐ро╡рпБ", 20, 20);

  let y = 35;
  doc.setFontSize(12);

  doc.text(`рокрпЖропро░рпН: ${student.name}`, 10, y); y += 6;
  doc.text(`ро╡роХрпБрокрпНрокрпБ: ${student.class}`, 10, y); y += 6;
  doc.text(`рокро│рпНро│ро┐: ${student.school}`, 10, y); y += 8;

  answers.forEach((a, i) => {
    if (y > 270) { doc.addPage(); y = 20; }

    doc.text(`${i + 1}. ${a.question}`, 10, y); y += 6;
    doc.text(`роЙроЩрпНроХро│рпН рокродро┐ро▓рпН: ${a.yourAnswer}`, 12, y); y += 5;
    doc.text(`роЪро░ро┐ропро╛рой рокродро┐ро▓рпН: ${a.correctAnswer}`, 12, y); y += 7;
  });

  doc.save("Tamil_Quiz_Report.pdf");
}
</script>

<div class="footer">┬й 2025 Thiraviya Kumar | Class 9 Tamil Medium Maths Quiz</div>
</body>
</html>
