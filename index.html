<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>9роорпН ро╡роХрпБрокрпНрокрпБ тАФ роХрогро┐род ро╡ро┐ройро╛ ро╡роЩрпНроХро┐ (10 роородро┐рокрпНрокрпЖрогрпН)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body{font-family:"Noto Sans Tamil",sans-serif;background:#f9fafb;padding:20px;color:#222;text-align:center;}
  h1{color:#006699;margin-bottom:10px;}
  .info-box input{padding:8px;margin:5px;border-radius:6px;border:1px solid #aaa;width:80%;max-width:400px;}
  .card{background:#fff;border-radius:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);padding:20px;margin:auto;max-width:700px;text-align:left;}
  button{background:#0084ff;border:none;color:#fff;padding:10px 20px;margin:10px;border-radius:8px;cursor:pointer;font-size:16px;}
  button:hover{background:#006edc;}
  .option-btn{display:block;width:100%;margin:8px 0;background:#e0f2ff;color:#111;text-align:left;padding:10px;border-radius:6px;border:1px solid #bde0ff;}
  #scoreboard,#timer{font-size:18px;margin-bottom:8px;color:#333;}
  #feedback{color:#006600;margin-top:10px;font-weight:bold;}
  .footer{margin-top:15px;color:#555;font-size:14px;}
</style>
</head>
<body>

<h1>ЁЯУШ 9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род ро╡ро┐ройро╛ рокро░ро┐роЪрпЛродройрпИ (10 роородро┐рокрпНрокрпЖрогрпН)</h1>

<div class="info-box" id="infoBox">
  <h3>рооро╛рогро╡ро░рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН</h3>
  <input type="text" id="studentName" placeholder="рокрпЖропро░рпН"><br>
  <input type="text" id="studentClass" placeholder="ро╡роХрпБрокрпНрокрпБ рооро▒рпНро▒рпБроорпН рокро┐ро░ро┐ро╡рпБ (роО.роХро╛., 9A)"><br>
  <input type="text" id="studentSchool" placeholder="рокро│рпНро│ро┐ рокрпЖропро░рпН"><br><br>
  <button onclick="startQuiz()">родрпКроЯроЩрпНроХрпБ тЮбя╕П</button>
</div>

<div id="quizArea" style="display:none;">
  <div id="scoreboard">роородро┐рокрпНрокрпЖрогрпН: 0 / 10</div>
  <div id="timer">тП▒я╕П роирпЗро░роорпН: 60</div>
  <div id="quiz" class="card"></div>
  <div id="feedback"></div>
  <button id="nextBtn" onclick="nextQuestion()">роЕроЯрпБродрпНрод ро╡ро┐ройро╛ тЮбя╕П</button>
  <button id="downloadBtn" style="display:none;" onclick="downloadPDF()">ЁЯУД PDF рокродро┐ро╡ро┐ро▒роХрпНроХ</button>
</div>

<script>
// ===== Safe Tamil Question Bank (using back-ticks) =====
const bank = [
  {sentence:`50000 + 300 + 70 + 5 роЗройрпН роЪрпБро░рпБроЩрпНроХро┐роп ро╡роЯро┐ро╡роорпН.`,chapter:`роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ`,options:[`53750`,`50375`,`53075`,`57305`],answerText:`50375`,explanation:`50000 + 300 + 70 + 5 = 50375.`},
  {sentence:`826 роЗройрпН ро╡ро┐ро░ро┐ро╡ро╛роХрпНроХ ро╡роЯро┐ро╡роорпН?`,chapter:`роОрогрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЗроЯроородро┐рокрпНрокрпБ`,options:[`800 + 20 + 6`,`820 + 6`,`80 + 26`,`8 + 26`],answerText:`800 + 20 + 6`,explanation:`826 = 800 + 20 + 6.`},
  {sentence:`45 + 33 = ?`,chapter:`роХрпВроЯрпНроЯро▓рпН`,options:[`68`,`78`,`76`,`66`],answerText:`78`,explanation:`45 + 33 = 78.`},
  {sentence:`26 тИТ 14 = ?`,chapter:`роХро┤ро┐родрпНродро▓рпН`,options:[`10`,`12`,`11`,`14`],answerText:`12`,explanation:`26 тИТ 14 = 12.`},
  {sentence:`8 ├Ч 2 = ?`,chapter:`рокрпЖро░рпБроХрпНроХро▓рпН`,options:[`16`,`18`,`14`,`10`],answerText:`16`,explanation:`8 ├Ч 2 = 16.`},
  {sentence:`9 ├Ч 3 = ?`,chapter:`рокрпЖро░рпБроХрпНроХро▓рпН`,options:[`27`,`21`,`24`,`18`],answerText:`27`,explanation:`9 ├Ч 3 = 27.`},
  {sentence:`7ройрпН ро╡ро░рпНроХрпНроХ роОрогрпН роОродрпБ?`,chapter:`ро╡ро░рпНроХрпНроХ роОрогрпНроХро│рпН`,options:[`49`,`14`,`7`,`77`],answerText:`49`,explanation:`7 ├Ч 7 = 49.`},
  {sentence:`2 рооро▒рпНро▒рпБроорпН 3 роЗройрпН LCM роОродрпБ?`,chapter:`роорпА.роЪро┐.роо`,options:[`6`,`5`,`12`,`9`],answerText:`6`,explanation:`LCM of 2 and 3 = 6.`},
  {sentence:`32 ├╖ 4 = ?`,chapter:`ро╡роХрпБродрпНродро▓рпН`,options:[`8`,`6`,`9`,`7`],answerText:`8`,explanation:`32 ├╖ 4 = 8.`},
  {sentence:`1532 ├╖ 100 роЗройрпН родроЪроо ро╡роЯро┐ро╡роорпН?`,chapter:`родроЪроо роОрогрпНроХро│рпН`,options:[`1.532`,`15.32`,`153.2`,`1532`],answerText:`15.32`,explanation:`1532 ├╖ 100 = 15.32.`}
];

// ===== Quiz Logic =====
let student={},questions=[],currentIndex=0,score=0,timer,timeLeft=60,answers=[];

function gradeFromPercent(p){if(p>=90)return"A+";if(p>=80)return"A";if(p>=70)return"B";if(p>=60)return"C";if(p>=50)return"D";return"F";}

function startQuiz(){
  student.name=document.getElementById("studentName").value.trim();
  student.class=document.getElementById("studentClass").value.trim();
  student.school=document.getElementById("studentSchool").value.trim();
  student.date=new Date().toLocaleDateString("ta-IN");
  if(!student.name||!student.class||!student.school){alert("тЭЧ роЕройрпИродрпНродрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпИропрпБроорпН роиро┐ро░рокрпНрокро╡рпБроорпН.");return;}
  questions=bank.sort(()=>0.5-Math.random()).slice(0,10);
  document.getElementById("infoBox").style.display="none";
  document.getElementById("quizArea").style.display="block";
  currentIndex=0;score=0;answers=[];
  nextQuestion();
}

function nextQuestion(){
  clearInterval(timer);
  document.getElementById("feedback").innerHTML="";
  if(currentIndex>=questions.length){finishQuiz();return;}
  const q=questions[currentIndex];timeLeft=60;
  document.getElementById("timer").textContent="тП▒я╕П роирпЗро░роорпН: "+timeLeft;
  document.getElementById("scoreboard").textContent="роородро┐рокрпНрокрпЖрогрпН: "+score+" / 10";
  const quiz=document.getElementById("quiz");
  quiz.innerHTML=`<h3>${currentIndex+1}. ${q.sentence}</h3>
  <p><b>роЕро▓роХрпБ:</b> ${q.chapter}</p>
  ${q.options.map(o=>`<button class='option-btn' onclick="checkAnswer(\`${o}\`)">${o}</button>`).join('')}
  <p style='font-size:13px;color:#666;'>60 ро╡ро┐ройро╛роЯро┐роХро│ро┐ро▓рпН рокродро┐ро▓ро│ро┐роХрпНроХро╡рпБроорпН</p>`;
  timer=setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").textContent="тП▒я╕П роирпЗро░роорпН: "+timeLeft;
    if(timeLeft<=0){clearInterval(timer);recordAnswer("роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ",false);showFeedback(false,q);setTimeout(()=>{currentIndex++;nextQuestion();},2000);}
  },1000);
}

function checkAnswer(opt){
  clearInterval(timer);
  const q=questions[currentIndex];
  const correct=(opt===q.answerText);
  if(correct)score++;
  recordAnswer(opt,correct);
  showFeedback(correct,q);
  setTimeout(()=>{currentIndex++;nextQuestion();},2000);
}

function recordAnswer(sel,correct){
  const q=questions[currentIndex];
  answers.push({question:q.sentence,yourAnswer:sel,correctAnswer:q.answerText,isCorrect:correct});
}

function showFeedback(correct,q){
  document.getElementById("feedback").innerHTML=
    correct?`тЬЕ роЪро░ро┐ропро╛рой рокродро┐ро▓рпН!<br><small>${q.explanation}</small>`:
    `тЭМ родро╡ро▒рпБ! роЪро░ро┐ропро╛рой рокродро┐ро▓рпН: ${q.answerText}<br><small>${q.explanation}</small>`;
}

function finishQuiz(){
  clearInterval(timer);
  const pct=Math.round((score/10)*100),grade=gradeFromPercent(pct);
  document.getElementById("quiz").innerHTML=`<h2>ЁЯОЙ родрпЗро░рпНро╡рпБ роорпБроЯро┐роирпНродродрпБ!</h2>
  <p>роорпКродрпНрод роородро┐рокрпНрокрпЖрогрпН: ${score}/10</p>
  <p>роЪродро╡рпАродроорпН: ${pct}%</p>
  <p>роородро┐рокрпНрокрпАроЯрпБ: ${grade}</p>`;
  document.getElementById("nextBtn").style.display="none";
  document.getElementById("downloadBtn").style.display="inline-block";
}

function downloadPDF(){
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF({orientation:"p",unit:"mm",format:"a4"});
  doc.setFont("Helvetica");
  doc.setFontSize(14);
  let y=15;
  doc.text("9роорпН ро╡роХрпБрокрпНрокрпБ роХрогро┐род (10 роородро┐рокрпНрокрпЖрогрпН) родрпЗро░рпНро╡рпБ роорпБроЯро┐ро╡рпБ",20,y);y+=8;
  doc.setFontSize(11);
  doc.text("рокрпЖропро░рпН: "+student.name,10,y);y+=6;
  doc.text("ро╡роХрпБрокрпНрокрпБ/рокро┐ро░ро┐ро╡рпБ: "+student.class,10,y);y+=6;
  doc.text("рокро│рпНро│ро┐: "+student.school,10,y);y+=6;
  doc.text("родрпЗродро┐: "+student.date,10,y);y+=10;

  answers.forEach((a,i)=>{
    if(y>270){doc.addPage();y=15;}
    doc.text(`${i+1}. ${a.question}`,10,y);y+=6;
    doc.text(`   роЙроЩрпНроХро│рпН рокродро┐ро▓рпН: ${a.yourAnswer}`,12,y);y+=5;
    doc.text(`   роЪро░ро┐ропро╛рой рокродро┐ро▓рпН: ${a.correctAnswer}`,12,y);y+=5;
    doc.text(`   роиро┐ро▓рпИ: ${(a.isCorrect?"тЬЕ роЪро░ро┐":"тЭМ родро╡ро▒рпБ")}`,12,y);y+=7;
  });

  const pct=Math.round((score/10)*100);
  const grade=gradeFromPercent(pct);
  y+=6;
  doc.text(`роорпКродрпНрод роородро┐рокрпНрокрпЖрогрпН: ${score}/10`,10,y);y+=6;
  doc.text(`роЪродро╡рпАродроорпН: ${pct}%`,10,y);y+=6;
  doc.text(`роородро┐рокрпНрокрпАроЯрпБ: ${grade}`,10,y);
  doc.save(`${student.name}_Maths_Quiz_Report.pdf`);
}
</script>

<div class="footer">┬й 2025 Thiraviya Kumar | Tamil Maths Quiz System</div>
</body>
</html>
